Name: tix
Version: 0.1
Synopsis: A type system for nix
Authors: regnat <regnat@regnat.ovh>
License: wtfpl with OCaml linking exception

OasisFormat: 0.4
BuildTools: ocamlbuild
Plugins: META (0.4), DevFiles (0.4), StdFiles(0.4)
AlphaFeatures: stdfiles_markdown, ocamlbuild_more_args
XOCamlbuildExtraArgs: -tag safe_string -cflags -w,+A-4

Library "tix-types"
  Path: lib/types
  Modules:
    Tix_types
  BuildDepends:
    ppx_deriving.std

Library "onix"
  Path: lib/onix
  Modules:
    Onix_lexer,
    Onix_parser,
    Onix_location,
    Onix_ast,
    Onix
  BuildDepends:
    tix-types,
    opal,
    ppx_deriving.std

Library "nix-light"
  Path: lib/nix-light
  Modules:
    Nl_ast,
    Nl_pp,
    Nl_of_onix,
    Nl
  BuildDepends:
    ppx_deriving.std,
    tix-types,
    onix

Library "nix-typecheck"
  Path: lib/typecheck
  Modules:
    Typed_ast,
    Typing_env,
    Typecheck_pat,
    Typecheck
  BuildDepends:
    ppx_deriving.std,
    tix-types,
    containers,
    nix-light

Executable onix_test
  Path: tests
  Install: false
  MainIs: tests.ml
  BuildDepends:
    onix,
    nix-light,
    nix-typecheck,
    oUnit

Test onix
  Command: $onix_test
  TestTools: onix_test
  Run: true

Document Tix
  Title: Tix documentation
  BuildTools+:  ocamldoc
  XOCamlbuildPath: .
  XOCamlbuildExtraArgs:
    "-docflags '-colorize-code -short-functors -charset utf-8'"
  XOCamlbuildLibraries:
    onix,
    nix-light,
    nix-typecheck
  Type: ocamlbuild (0.4)
